<html>
<head>
    <title>Test rest</title>
    <script src="js/jbpm-rest-integration.js" type="text/javascript"></script>
    <script type="text/javascript">

        function clearDiv(divId) {
            document.getElementById(divId).innerHTML = "";
        }

        function showTaskForm(divId) {
            var hostUrl = document.getElementById('url').value;
            var taskId = document.getElementById('taskId').value;

            var onsuccess = function (msg) {
                alert ("success showing task form!: " + msg)
            }

            var onerror = function (msg) {
                alert("something wrong happened: " + msg);
                jbpmRestAPI.clearContainer(divId);
            }

            jbpmRestAPI.showTaskForm(hostUrl, taskId, divId, onsuccess, onerror);
        }

        function showStartProcessForm(divId) {
            var hostUrl = document.getElementById('url').value;
            var deploymentId = document.getElementById('deploymentId').value;
            var processId = document.getElementById('processId').value;


            var onsuccess = function (msg) {
                alert ("success showing process form!: " + msg)
            }

            var onerror = function (msg) {
                alert("something wrong happened: " + msg);
                jbpmRestAPI.clearContainer(divId);
            }
            jbpmRestAPI.showStartProcessForm(hostUrl, deploymentId, processId, divId, onsuccess, onerror);
        }

        function startProcess(divId) {
            var onsuccess= function(msg) {
                alert("Starting process: " + msg);
                jbpmRestAPI.clearContainer(divId);
            }

            var onerror = function(msg) {
                alert("Error starting process: " + msg);
                jbpmRestAPI.clearContainer(divId);
            }
            jbpmRestAPI.startProcess(divId, onsuccess, onerror);
        }

        function claimTask(divId) {
            var onsuccess= function(msg) {
                alert("Task claimed: " + msg);
            }

            var onerror = function(msg) {
                alert("Error claiming task: " + msg);
                jbpmRestAPI.clearContainer(divId);
            }
            jbpmRestAPI.claimTask(divId, onsuccess, onerror)
        }

        function startTask(divId) {
            var onsuccess= function(msg) {
                alert("Starting task: " + msg);
            }

            var onerror = function(msg) {
                alert("Error starting task: " + msg);
                jbpmRestAPI.clearContainer(divId);
            }
            jbpmRestAPI.startTask(divId, onsuccess, onerror)
        }

        function releaseTask(divId) {
            var onsuccess= function(msg) {
                alert("Released task: " + msg);
                jbpmRestAPI.clearContainer(divId);
            }

            var onerror = function(msg) {
                alert("Error releasing task: " + msg);
                jbpmRestAPI.clearContainer(divId);
            }
            jbpmRestAPI.releaseTask(divId, onsuccess, onerror)
        }

        function saveTask(divId) {
            var onsuccess= function(msg) {
                alert("Saved task: " + msg);
            }

            var onerror = function(msg) {
                alert("Error saving task: " + msg);
                jbpmRestAPI.clearContainer(divId);
            }
            jbpmRestAPI.saveTask(divId, onsuccess, onerror)
        }

        function completeTask(divId) {
            var onsuccess= function(msg) {
                alert("Completed task: " + msg);
                jbpmRestAPI.clearContainer(divId);
            }

            var onerror = function(msg) {
                alert("Error completing task: " + msg);
                jbpmRestAPI.clearContainer(divId);
            }
            jbpmRestAPI.completeTask(divId, onsuccess, onerror)
        }

    </script>
</head>

<body>
    <table>
        <tr>
            <td>
                <table>
                    <th>
                        <td colspan="2">Process Info</td>
                    </th>
                    <tr>
                        <td>DeploymentId: </td>
                        <td><input name="deploymentId" id="deploymentId"></td>
                    </tr>
                    <tr>
                        <td>ProcessId: </td>
                        <td><input name="processId" id="processId"></td>
                    </tr>
                </table>
            </td>
            <td>
                <table>
                    <th>
                        <td colspan="2">Task Info</td>
                    </th>
                    <tr>
                        <td>TaskId: </td>
                        <td><input name="taskId" id="taskId"></td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <table>
                    <tr>
                        <td>URL: </td>
                        <td><input name="url" id="url"></td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <input type="button" value="show process form" onclick="showStartProcessForm('formdiv')">
                <input type="button" value="show task form" onclick="showTaskForm('formdiv')">
            </td>
        </tr>
    </table>

    <div id="formdiv" style="width: 400px; height: 400px; border: solid black 1px;"></div>
    <input type="button" value="Start Process!" onclick="startProcess('formdiv')"/>
    <input type="button" value="Claim Task" onclick="claimTask('formdiv');"/>
    <input type="button" value="Start Task" onclick="startTask('formdiv');"/>
    <input type="button" value="Release Task" onclick="releaseTask('formdiv');"/>
    <input type="button" value="Save Task" onclick="saveTask('formdiv');"/>
    <input type="button" value="Complete Task" onclick="completeTask('formdiv');"/>
</body>

</html>